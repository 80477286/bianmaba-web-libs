var e=Object.defineProperty;import{E as t,a,b as s,c as l,d as r,e as n,v as o,l as i,f as u,g as d,h as c,i as p,j as h,k as m,m as f}from"../element-plus/element-plus.f6f78dcd.js";import{H as g,B as y,o as b,Q as x,P as w,a as v,L as j,T as R,Y as P,u as q,r as T,e as C,c as V,ad as S,M as O,ae as U}from"../@vue/@vue.910c1fed.js";import{c as E}from"../axios/axios.519b70d4.js";import"../@vueuse/@vueuse.e395e2ea.js";import"../lodash-es/lodash-es.8698919c.js";import"../async-validator/async-validator.8d480e59.js";import"../@element-plus/@element-plus.cabac26a.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../@popperjs/@popperjs.b78c3215.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";var _=Object.defineProperty,H=(e,t,a)=>(((e,t,a)=>{t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a})(e,"symbol"!=typeof t?t+"":t,a),a);const I=Object.prototype.toString,L=(F=Object.create(null),e=>{let t=I.call(e);return F[t]||(F[t]=t.slice(8,-1).toLowerCase())}),A=e=>(e=e.toLowerCase(),function(t){return L(t)===e}),D=e=>Array.isArray(e);var F;A("ArrayBuffer");const z=e=>{if("object"!==L(e))return!1;let t=Object.getPrototypeOf(e);return null===t||t===Object.prototype};A("Date"),A("File"),A("Blob"),A("FileList"),A("URLSearchParams");const k=(e,t)=>{if(!(null===e||typeof e>"u"))if("object"!=typeof e&&(e=[e]),D(e))for(let a=0,s=e.length;a<s;a++)t.call(null,e[a],a,e);else for(let a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)},G=function(...e){let t=arguments[0],a=(e,a)=>{z(t[a])&&z(e)?t[a]=G(t[a],e):z(e)?t[a]=G({},e):D(e)?t[a]=e.slice():t[a]=e};for(let s=0,l=arguments.length;s<l;s++)k(arguments[s],a);return t},B=G;var N=(e=>(e["application/atom+xml"]="application/atom+xml",e["application/json"]="application/json",e["application/x-www-form-urlencoded"]="application/x-www-form-urlencoded",e["application/xml"]="application/xml",e["multipart/form-data"]="multipart/form-data",e["text/html"]="text/html",e["text/plain"]="text/plain",e))(N||{}),K=(e=>(e.POST="POST",e.GET="GET",e.DELETE="DELETE",e.HEAD="HEAD",e.OPTIONS="OPTIONS",e.PUT="PUT",e.PATCH="PATCH",e.PURGE="PURGE",e.LINK="LINK",e.UNLINK="UNLINK",e))(K||{});const Q=new class{constructor(){H(this,"method",K.POST),H(this,"headers",{"Content-Type":N["application/json"]}),H(this,"xRequestedWith","XMLHttpRequest")}},M=class{constructor(e=Q){M.default=B(M.default||{},e),console.debug("初始化全局配置..."),E.defaults.baseURL=M.default.baseUrl,E.defaults.method=M.default.method,E.defaults.headers.common["X-Requested-With"]=M.default.xRequestedWith,E.interceptors.request.use(M.default.requestSuccessHandler||this.defaultRequestSuccessHandler,M.default.requestFailHandler||this.defaultRequestFailHandler),E.interceptors.response.use(M.default.responseSuccessHandler||this.defaultResponseSuccessHandler,M.default.responseFailHandler||this.defaultResponseFailHandler),console.debug("全局配置初始化完成。")}defaultRequestSuccessHandler(e){return e}defaultRequestFailHandler(e){return console.error("远程请求出现错误!"),Promise.reject(e)}defaultResponseSuccessHandler(e){return e}defaultResponseFailHandler(e){var t,a;return console.log((null==(a=null==(t=e.response)?void 0:t.data)?void 0:a.result)||"远程请求出现错误(code="+e.response.status+")"),Promise.reject(e)}createAxiosInstance(e){let t=E.create(e);return console.log("axios instance created"),t.interceptors.request.use(M.default.requestSuccessHandler,M.default.requestFailHandler),t.interceptors.response.use(M.default.responseSuccessHandler,M.default.responseFailHandler),t}};let W=M;H(W,"default",Q);class X{constructor(){H(this,"success",!1),H(this,"data",null),H(this,"errors",[]),H(this,"exception",null),H(this,"extendedData",null),H(this,"messages",[]),H(this,"result",null),H(this,"status",null)}}class Y{constructor(e,t){H(this,"instance"),H(this,"url",""),H(this,"loading",!1),H(this,"response",new X),H(this,"data",{}),H(this,"params",{}),this.instance=e,this.url=t||this.url}execute(e={}){return this.loading=!0,this.data=B(this.data||{},e.data||{}),this.params=B(this.params||{},e.params||{}),e.url=e.url?e.url:this.url,new Promise(((t,a)=>{this.instance.request(e).then((e=>{try{this.handleThenResponse(t,e)}finally{this.loading=!1}})).catch((e=>{try{this.handleCatchResponse(a,e)}finally{this.loading=!1}}))}))}toJsonRequest(){return this.instance.defaults.headers["Content-Type"]=N["application/json"],this}toFormRequest(){return this.instance.defaults.headers["Content-Type"]=N["application/x-www-form-urlencoded"],this}toFormDataRequest(){return this.instance.defaults.headers["Content-Type"]=N["multipart/form-data"],this}setDefaultResponse(e={}){return this.response=B(this.response,e),this}setDefaultRequestData(e={}){return this.data=B(this.data,e),this}setDefaultResultParams(e={}){return this.params=B(this.params,e),this}handleThenResponse(e,t){this.response=t.data,e(t.data)}handleCatchResponse(e,t){if(console.error("远程请求发生异常：",t),t.response)this.response=t.response.data,e(t.response.data);else{let t={success:!1,result:"远程请求发生异常！",data:null};this.response=t,e(t)}}}class J extends Y{constructor(e,t){super(e,t)}execute(e={},t={}){return this.loading=!0,this.params=B(this.params||{},t.params||{},e||{}),t.params=this.params,new Promise(((e,a)=>{this.instance.get(t.url||this.url,t).then((t=>{try{this.handleThenResponse(e,t)}finally{this.loading=!1}})).catch((e=>{try{this.handleCatchResponse(a,e)}finally{this.loading=!1}}))}))}}class Z extends Y{constructor(e,t){super(e,t)}execute(e={},t={},a={}){return this.loading=!0,this.data=B(this.data||{},a.data||{},e||{}),this.params=B(this.params||{},a.params||{},t||{}),a.params=this.params,new Promise(((e,t)=>{this.instance.post(a.url||this.url,this.data,a).then((t=>{try{this.handleThenResponse(e,t)}finally{this.loading=!1}})).catch((e=>{try{this.handleCatchResponse(t,e)}finally{this.loading=!1}}))}))}}const $=class extends W{constructor(e=Q){super(e)}createRequestExecutor(e="",t={}){let a=this.createAxiosInstance(t);return g(new Y(a,e))}createGetExecutor(e="",t={}){let a=B({method:K.GET,data:null,params:null,headers:{"Content-Type":N["application/x-www-form-urlencoded"]}},t),s=this.createAxiosInstance(a);return g(new J(s,e))}createQueryExecutor(e="",t={}){let a=B({method:K.GET,data:null,params:null,headers:{"Content-Type":N["application/x-www-form-urlencoded"]}},t),s=this.createAxiosInstance(a);return g(new J(s,e))}createPostExecutor(e="",t={}){let a=B({method:K.POST,data:null,params:null,headers:{"Content-Type":N["multipart/form-data"]}},t),s=this.createAxiosInstance(a);return g(new Z(s,e))}static getInstance(e){return this.instance?e&&console.error("实例已经存在，重获取实例时，配置选项将不会生效！"):this.instance=new $(e),this.instance}};let ee=$;H(ee,"instance");const te=Object.prototype.toString,ae=(re=Object.create(null),e=>{let t=te.call(e);return re[t]||(re[t]=t.slice(8,-1).toLowerCase())}),se=e=>(e=e.toLowerCase(),function(t){return ae(t)===e}),le=e=>Array.isArray(e);var re;se("ArrayBuffer");const ne=e=>{if("object"!==ae(e))return!1;let t=Object.getPrototypeOf(e);return null===t||t===Object.prototype};se("Date"),se("File"),se("Blob"),se("FileList"),se("URLSearchParams");const oe=(e,t)=>{if(!(null===e||typeof e>"u"))if("object"!=typeof e&&(e=[e]),le(e))for(let a=0,s=e.length;a<s;a++)t.call(null,e[a],a,e);else for(let a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)},ie=function(...e){let t=arguments[0],a=(e,a)=>{ne(t[a])&&ne(e)?t[a]=ie(t[a],e):ne(e)?t[a]=ie({},e):le(e)?t[a]=e.slice():t[a]=e};for(let s=0,l=arguments.length;s<l;s++)oe(arguments[s],a);return t},ue=ie,de=class extends ee{createGetById(){return ue(),this.createGetExecutor("/user/getById")}createQuery(){return this.createPostExecutor("/user/query").toAjaxRequest()}createSave(){return this.createPostExecutor("/user/save",{headers:{"Content-Type":N["application/json"]}})}};let ce=de;var pe,he,me;pe=ce,he="userService",me=new de,((t,a,s)=>{a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s})(pe,"symbol"!=typeof he?he+"":he,me);const fe=ce.userService,ge=y({__name:"UserEditor",setup(e,{expose:i}){const u=fe.createGetById(),d=fe.createSave(),c=g({visible:!1,srcId:null}),p=g({name:[{required:!0,message:"请输入人员姓名",trigger:"blur"},{min:3,max:32,message:"长度必须为 3 - 32个字符",trigger:"blur"}],regin:[{required:!0,message:"请输入所在地域",trigger:"blur"},{min:1,max:32,message:"长度必须为 1 - 32 个字符",trigger:"blur"}],province:[{required:!0,message:"请输入所在省份",trigger:"blur"},{min:1,max:32,message:"长度必须为 1 - 32 个字符",trigger:"blur"}],city:[{required:!0,message:"请输入所在城市",trigger:"blur"},{min:1,max:32,message:"长度必须为 1 - 32 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{min:1,max:32,message:"长度必须为 1 - 32 个字符",trigger:"blur"}]}),h=()=>{f()},m=()=>{d.execute("/user/save",u.response).then((e=>{c.visible=!1,t.success({title:"提示",message:e.result})}))},f=()=>{u.execute("user/getById",{id:c.srcId}).then((e=>{console.log(e)}))};return i({edit:e=>{c.srcId=e,c.visible=!0,f()}}),(e,t)=>{const i=a,f=s,g=l,y=r,T=n,C=o;return b(),x(T,{title:"用户编辑","model-value":c.visible,onClose:t[7]||(t[7]=e=>c.visible=!1),"destroy-on-close":"",fullscreen:"","append-to-body":"","close-on-click-modal":!1},{footer:w((()=>[v("div",null,[j(y,{onClick:h},{default:w((()=>[R("重置")])),_:1}),j(y,{type:"primary",onClick:m},{default:w((()=>[R("保存")])),_:1})])])),default:w((()=>[P((b(),x(g,{model:q(u).response.data,rules:p,ref:"formRef","label-position":"right","label-width":"120px"},{default:w((()=>[j(f,{label:"姓名",prop:"name",class:"el-col-12"},{default:w((()=>[j(i,{modelValue:q(u).response.data.name,"onUpdate:modelValue":t[0]||(t[0]=e=>q(u).response.data.name=e),maxlength:"32",min:"3","show-word-limit":""},null,8,["modelValue"])])),_:1}),j(f,{label:"所在区域",prop:"regin",class:"el-col-12"},{default:w((()=>[j(i,{modelValue:q(u).response.data.regin,"onUpdate:modelValue":t[1]||(t[1]=e=>q(u).response.data.regin=e),maxlength:"32",min:"1","show-word-limit":""},null,8,["modelValue"])])),_:1}),j(f,{label:"所在省份",prop:"province",class:"el-col-12"},{default:w((()=>[j(i,{modelValue:q(u).response.data.province,"onUpdate:modelValue":t[2]||(t[2]=e=>q(u).response.data.province=e),maxlength:"32",min:"1","show-word-limit":""},null,8,["modelValue"])])),_:1}),j(f,{label:"所在城市",prop:"city",class:"el-col-12"},{default:w((()=>[j(i,{modelValue:q(u).response.data.city,"onUpdate:modelValue":t[3]||(t[3]=e=>q(u).response.data.city=e),maxlength:"32",min:"3","show-word-limit":""},null,8,["modelValue"])])),_:1}),j(f,{label:"地址",class:"el-col-12"},{default:w((()=>[j(i,{modelValue:q(u).response.data.address,"onUpdate:modelValue":t[4]||(t[4]=e=>q(u).response.data.address=e),maxlength:"128",min:"3","show-word-limit":""},null,8,["modelValue"])])),_:1}),j(f,{label:"电话",prop:"phone",class:"el-col-12"},{default:w((()=>[j(i,{modelValue:q(u).response.data.phone,"onUpdate:modelValue":t[5]||(t[5]=e=>q(u).response.data.phone=e),maxlength:"18",min:"3","show-word-limit":""},null,8,["modelValue"])])),_:1}),j(f,{label:"URL",class:"el-col-12"},{default:w((()=>[j(i,{modelValue:q(u).response.data.url,"onUpdate:modelValue":t[6]||(t[6]=e=>q(u).response.data.url=e),maxlength:"128",min:"3","show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])),[[C,q(u).loading||q(d).loading]])])),_:1},8,["model-value"])}}}),ye={style:{display:"flex","flex-direction":"row","justify-content":"space-between"}},be=y({__name:"UserManager",setup(e){const t=T(Object.keys(i)),s=T("zhCn"),l=fe.createQuery(),n=T();C((()=>{g()}));const o=e=>{n.value.edit(e.id)},g=()=>{l.execute({a:1},{b:2}).then((e=>{console.log(e)}))};return(e,y)=>{const P=f,T=d,C=c,E=r,_=a,H=p,I=h,L=m,A=u;return b(),x(A,{locale:i[s.value],size:"large"},{default:w((()=>[v("div",ye,[j(C,null,{default:w((()=>[j(T,{modelValue:s.value,"onUpdate:modelValue":y[0]||(y[0]=e=>s.value=e),class:"m-2",placeholder:"Select"},{default:w((()=>[(b(!0),V(O,null,S(t.value,(e=>(b(),x(P,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),j(C,{style:{"margin-left":"5px"}},{default:w((()=>[j(_,{modelValue:q(l).data.query,"onUpdate:modelValue":y[1]||(y[1]=e=>q(l).data.query=e),onClear:g,onKeypress:U(g,["enter"]),clearable:""},{append:w((()=>[j(E,{onClick:g},{default:w((()=>[R("Search")])),_:1})])),_:1},8,["modelValue","onKeypress"])])),_:1})]),j(I,{data:q(l).response.data,onRowDblclick:o,border:"",stripe:"",style:{padding:"10px 0 10px 0"}},{default:w((()=>[j(H,{prop:"id",label:"ID",width:"180"}),j(H,{prop:"name",label:"姓名",width:"180"}),j(H,{prop:"regin",label:"所在地域"}),j(H,{prop:"province",label:"所在省份"}),j(H,{prop:"city",label:"所在城市"}),j(H,{prop:"address",label:"地址"}),j(H,{prop:"phone",label:"联系电话"}),j(H,{prop:"url",label:"URL地址"})])),_:1},8,["data"]),j(L,{background:"",onCurrentChange:g,onSizeChange:g,total:q(l).response.total||0,"current-page":q(l).response.page,"onUpdate:currentPage":y[2]||(y[2]=e=>q(l).response.page=e),"page-size":q(l).response.size,"onUpdate:pageSize":y[3]||(y[3]=e=>q(l).response.size=e),"hide-on-single-page":!1,"page-sizes":[10,15,20,25,30,35,40],layout:"total, sizes, prev, pager, next, jumper"},null,8,["total","current-page","page-size"]),j(ge,{ref_key:"userEditorRef",ref:n},null,512)])),_:1},8,["locale"])}}});export{be as default};
