var e=Object.defineProperty;import{E as t,a,b as s,c as l,d as r,e as o,v as n,l as i,f as u,g as p,h as c,i as d,j as m,k as h,m as g}from"../element-plus/element-plus.f6f78dcd.js";import{H as f,B as b,o as y,Q as x,P as w,a as v,L as j,T as O,Y as R,u as P,r as q,e as V,c as S,ad as T,M as U,ae as C}from"../@vue/@vue.910c1fed.js";import{i as _}from"../axios/axios.d68c77bd.js";import"../@vueuse/@vueuse.e395e2ea.js";import"../lodash-es/lodash-es.8698919c.js";import"../async-validator/async-validator.8d480e59.js";import"../@element-plus/@element-plus.cabac26a.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../@popperjs/@popperjs.b78c3215.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";var E=Object.defineProperty,H=(e,t,a)=>(((e,t,a)=>{t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a})(e,"symbol"!=typeof t?t+"":t,a),a);const I=Object.prototype.toString,L=(A=Object.create(null),e=>{let t=I.call(e);return A[t]||(A[t]=t.slice(8,-1).toLowerCase())}),D=e=>(e=e.toLowerCase(),function(t){return L(t)===e}),z=e=>Array.isArray(e);var A;D("ArrayBuffer");const F=e=>{if("object"!==L(e))return!1;let t=Object.getPrototypeOf(e);return null===t||t===Object.prototype};D("Date"),D("File"),D("Blob"),D("FileList"),D("URLSearchParams");const k=(e,t)=>{if(!(null===e||typeof e>"u"))if("object"!=typeof e&&(e=[e]),z(e))for(let a=0,s=e.length;a<s;a++)t.call(null,e[a],a,e);else for(let a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)},B=function(...e){let t=arguments[0],a=(e,a)=>{F(t[a])&&F(e)?t[a]=B(t[a],e):F(e)?t[a]=B({},e):z(e)?t[a]=e.slice():t[a]=e};for(let s=0,l=arguments.length;s<l;s++)k(arguments[s],a);return t},G=B;var N=(e=>(e["application/atom+xml"]="application/atom+xml",e["application/json"]="application/json",e["application/x-www-form-urlencoded"]="application/x-www-form-urlencoded",e["application/xml"]="application/xml",e["multipart/form-data"]="multipart/form-data",e["text/html"]="text/html",e["text/plain"]="text/plain",e))(N||{}),K=(e=>(e.POST="POST",e.GET="GET",e.DELETE="DELETE",e.HEAD="HEAD",e.OPTIONS="OPTIONS",e.PUT="PUT",e.PATCH="PATCH",e.PURGE="PURGE",e.LINK="LINK",e.UNLINK="UNLINK",e))(K||{});const M={method:K.POST,headers:{"Content-Type":N["application/json"]},xRequestedWith:"XMLHttpRequest"};class Q{constructor(e=M){H(this,"globalOptions",M),this.globalOptions=G(this.globalOptions||{},e),console.debug("初始化全局配置..."),_.defaults.baseURL=this.globalOptions.baseUrl,_.defaults.method=this.globalOptions.method,_.defaults.headers.common["X-Requested-With"]=this.globalOptions.xRequestedWith,_.interceptors.request.use(this.globalOptions.requestSuccessHandler||this.defaultRequestSuccessHandler,this.globalOptions.requestFailHandler||this.defaultRequestFailHandler),_.interceptors.response.use(this.globalOptions.responseSuccessHandler||this.defaultResponseSuccessHandler,this.globalOptions.responseFailHandler||this.defaultResponseFailHandler),console.debug("全局配置初始化完成。")}defaultRequestSuccessHandler(e){return e}defaultRequestFailHandler(e){return console.error("远程请求出现错误!"),Promise.reject(e)}defaultResponseSuccessHandler(e){return e}defaultResponseFailHandler(e){var t,a;return console.log((null==(a=null==(t=e.response)?void 0:t.data)?void 0:a.result)||"远程请求出现错误(code="+e.response.status+")"),Promise.reject(e)}createAxiosInstance(e){let t=_.create(e);return console.log("axios instance created"),t.interceptors.request.use(this.globalOptions.requestSuccessHandler,this.globalOptions.requestFailHandler),t.interceptors.response.use(this.globalOptions.responseSuccessHandler,this.globalOptions.responseFailHandler),t}}class W{constructor(e,t){H(this,"instance"),H(this,"url",""),H(this,"loading",!1),H(this,"response",{success:!1}),H(this,"data",{}),H(this,"params",{}),this.instance=e,this.url=t||""}execute(e={}){return this.loading=!0,this.data=G(this.data||{},e.data||{}),this.params=G(this.params||{},e.params||{}),e.url=e.url?e.url:this.url,new Promise(((t,a)=>{this.instance.request(e).then((e=>{try{this.handleThenResponse(t,e)}finally{this.loading=!1}})).catch((e=>{try{this.handleCatchResponse(a,e)}finally{this.loading=!1}}))}))}setDefaultResponse(e={}){return this.response=G(this.response,e),this}setDefaultRequestData(e={}){return this.data=G(this.data,e),this}setDefaultResultParams(e={}){return this.params=G(this.params,e),this}handleThenResponse(e,t){this.response=t.data,e(t.data)}handleCatchResponse(e,t){if(console.error("远程请求发生异常：",t),t.response)this.response=t.response.data,e(t.response.data);else{let t={success:!1,result:"远程请求发生异常！",data:null};this.response=t,e(t)}}}class X extends W{constructor(e,t){super(e,t)}execute(e={},t={}){return this.loading=!0,this.params=G(this.params||{},t.params||{},e||{}),t.params=this.params,new Promise(((e,a)=>{this.instance.get(t.url||this.url,t).then((t=>{try{this.handleThenResponse(e,t)}finally{this.loading=!1}})).catch((e=>{try{this.handleCatchResponse(a,e)}finally{this.loading=!1}}))}))}}class Y extends W{constructor(e,t){super(e,t)}execute(e={},t={},a={}){return this.loading=!0,this.data=G(this.data||{},a.data||{},e||{}),this.params=G(this.params||{},a.params||{},t||{}),this.setDefaultResponse({total:0,page:1,size:10}),a.params=this.params,new Promise(((e,t)=>{this.instance.post(a.url||this.url,this.data,a).then((t=>{try{this.handleThenResponse(e,t)}finally{this.loading=!1}})).catch((e=>{try{this.handleCatchResponse(t,e)}finally{this.loading=!1}}))}))}}const J=class extends Q{constructor(e=M){super(e)}createRequestExecutor(e="",t={}){let a=this.createAxiosInstance(t);return f(new W(a,e))}createGetExecutor(e="",t={}){let a=G({method:K.GET,data:null,params:null,headers:{"Content-Type":N["application/x-www-form-urlencoded"]}},t),s=this.createAxiosInstance(a);return f(new X(s,e))}createPostExecutor(e="",t={}){let a=G({method:K.POST,data:null,params:null,headers:{"Content-Type":N["multipart/form-data"]}},t),s=this.createAxiosInstance(a);return f(new Y(s,e))}static getInstance(e){return this.instance?e&&console.error("实例已经存在，重获取实例时，配置选项将不会生效！"):this.instance=new J(G(M,e||{})),this.instance}};let Z=J;H(Z,"instance");var $=(e=>(e["application/atom+xml"]="application/atom+xml",e["application/json"]="application/json",e["application/x-www-form-urlencoded"]="application/x-www-form-urlencoded",e["application/xml"]="application/xml",e["multipart/form-data"]="multipart/form-data",e["text/html"]="text/html",e["text/plain"]="text/plain",e))($||{});const ee=Object.prototype.toString,te=(le=Object.create(null),e=>{let t=ee.call(e);return le[t]||(le[t]=t.slice(8,-1).toLowerCase())}),ae=e=>(e=e.toLowerCase(),function(t){return te(t)===e}),se=e=>Array.isArray(e);var le;ae("ArrayBuffer");const re=e=>{if("object"!==te(e))return!1;let t=Object.getPrototypeOf(e);return null===t||t===Object.prototype};ae("Date"),ae("File"),ae("Blob"),ae("FileList"),ae("URLSearchParams");const oe=(e,t)=>{if(!(null===e||typeof e>"u"))if("object"!=typeof e&&(e=[e]),se(e))for(let a=0,s=e.length;a<s;a++)t.call(null,e[a],a,e);else for(let a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)},ne=function(...e){let t=arguments[0],a=(e,a)=>{re(t[a])&&re(e)?t[a]=ne(t[a],e):re(e)?t[a]=ne({},e):se(e)?t[a]=e.slice():t[a]=e};for(let s=0,l=arguments.length;s<l;s++)oe(arguments[s],a);return t},ie=ne,ue=class extends Z{createGetById(){return ie(),this.createGetExecutor("/user/getById").setDefaultResponse({data:{}})}createQuery(){return this.createPostExecutor("/user/query",{headers:{"Content-Type":$["application/json"]}}).setDefaultRequestData({size:10,page:1,pageOffset:-1})}createSave(){return this.createPostExecutor("/user/save",{headers:{"Content-Type":$["application/json"]}}).setDefaultRequestData({size:10,page:1,pageOffset:-1})}};let pe=ue;var ce,de,me;ce=pe,de="userService",me=new ue,((t,a,s)=>{a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s})(ce,"symbol"!=typeof de?de+"":de,me);const he=pe.userService,ge=b({__name:"UserEditor",setup(e,{expose:i}){const u=he.createGetById(),p=he.createSave(),c=f({visible:!1,srcId:null}),d=f({name:[{required:!0,message:"请输入人员姓名",trigger:"blur"},{min:3,max:32,message:"长度必须为 3 - 32个字符",trigger:"blur"}],regin:[{required:!0,message:"请输入所在地域",trigger:"blur"},{min:1,max:32,message:"长度必须为 1 - 32 个字符",trigger:"blur"}],province:[{required:!0,message:"请输入所在省份",trigger:"blur"},{min:1,max:32,message:"长度必须为 1 - 32 个字符",trigger:"blur"}],city:[{required:!0,message:"请输入所在城市",trigger:"blur"},{min:1,max:32,message:"长度必须为 1 - 32 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{min:1,max:32,message:"长度必须为 1 - 32 个字符",trigger:"blur"}]}),m=()=>{g()},h=()=>{p.execute("/user/save",u.response).then((e=>{c.visible=!1,t.success({title:"提示",message:e.result})}))},g=()=>{u.execute("user/getById",{id:c.srcId}).then((e=>{console.log(e)}))};return i({edit:e=>{c.srcId=e,c.visible=!0,g()}}),(e,t)=>{const i=a,g=s,f=l,b=r,q=o,V=n;return y(),x(q,{title:"用户编辑","model-value":c.visible,onClose:t[7]||(t[7]=e=>c.visible=!1),"destroy-on-close":"",fullscreen:"","append-to-body":"","close-on-click-modal":!1},{footer:w((()=>[v("div",null,[j(b,{onClick:m},{default:w((()=>[O("重置")])),_:1}),j(b,{type:"primary",onClick:h},{default:w((()=>[O("保存")])),_:1})])])),default:w((()=>[R((y(),x(f,{model:P(u).response.data,rules:d,ref:"formRef","label-position":"right","label-width":"120px"},{default:w((()=>[j(g,{label:"姓名",prop:"name",class:"el-col-12"},{default:w((()=>[j(i,{modelValue:P(u).response.data.name,"onUpdate:modelValue":t[0]||(t[0]=e=>P(u).response.data.name=e),maxlength:"32",min:"3","show-word-limit":""},null,8,["modelValue"])])),_:1}),j(g,{label:"所在区域",prop:"regin",class:"el-col-12"},{default:w((()=>[j(i,{modelValue:P(u).response.data.regin,"onUpdate:modelValue":t[1]||(t[1]=e=>P(u).response.data.regin=e),maxlength:"32",min:"1","show-word-limit":""},null,8,["modelValue"])])),_:1}),j(g,{label:"所在省份",prop:"province",class:"el-col-12"},{default:w((()=>[j(i,{modelValue:P(u).response.data.province,"onUpdate:modelValue":t[2]||(t[2]=e=>P(u).response.data.province=e),maxlength:"32",min:"1","show-word-limit":""},null,8,["modelValue"])])),_:1}),j(g,{label:"所在城市",prop:"city",class:"el-col-12"},{default:w((()=>[j(i,{modelValue:P(u).response.data.city,"onUpdate:modelValue":t[3]||(t[3]=e=>P(u).response.data.city=e),maxlength:"32",min:"3","show-word-limit":""},null,8,["modelValue"])])),_:1}),j(g,{label:"地址",class:"el-col-12"},{default:w((()=>[j(i,{modelValue:P(u).response.data.address,"onUpdate:modelValue":t[4]||(t[4]=e=>P(u).response.data.address=e),maxlength:"128",min:"3","show-word-limit":""},null,8,["modelValue"])])),_:1}),j(g,{label:"电话",prop:"phone",class:"el-col-12"},{default:w((()=>[j(i,{modelValue:P(u).response.data.phone,"onUpdate:modelValue":t[5]||(t[5]=e=>P(u).response.data.phone=e),maxlength:"18",min:"3","show-word-limit":""},null,8,["modelValue"])])),_:1}),j(g,{label:"URL",class:"el-col-12"},{default:w((()=>[j(i,{modelValue:P(u).response.data.url,"onUpdate:modelValue":t[6]||(t[6]=e=>P(u).response.data.url=e),maxlength:"128",min:"3","show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])),[[V,P(u).loading||P(p).loading]])])),_:1},8,["model-value"])}}}),fe={style:{display:"flex","flex-direction":"row","justify-content":"space-between"}},be=b({__name:"UserManager",setup(e){const t=q(Object.keys(i)),s=q("zhCn"),l=he.createQuery(),o=q();V((()=>{f()}));const n=e=>{o.value.edit(e.id)},f=()=>{l.execute({a:1},{b:2}).then((e=>{console.log(e)}))};return(e,b)=>{const R=g,q=p,V=c,_=r,E=a,H=d,I=m,L=h,D=u;return y(),x(D,{locale:i[s.value],size:"large"},{default:w((()=>[v("div",fe,[j(V,null,{default:w((()=>[j(q,{modelValue:s.value,"onUpdate:modelValue":b[0]||(b[0]=e=>s.value=e),class:"m-2",placeholder:"Select"},{default:w((()=>[(y(!0),S(U,null,T(t.value,(e=>(y(),x(R,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),j(V,{style:{"margin-left":"5px"}},{default:w((()=>[j(E,{modelValue:P(l).data.query,"onUpdate:modelValue":b[1]||(b[1]=e=>P(l).data.query=e),onClear:f,onKeypress:C(f,["enter"]),clearable:""},{append:w((()=>[j(_,{onClick:f},{default:w((()=>[O("Search")])),_:1})])),_:1},8,["modelValue","onKeypress"])])),_:1})]),j(I,{data:P(l).response.data,onRowDblclick:n,border:"",stripe:"",style:{padding:"10px 0 10px 0"}},{default:w((()=>[j(H,{prop:"id",label:"ID",width:"180"}),j(H,{prop:"name",label:"姓名",width:"180"}),j(H,{prop:"regin",label:"所在地域"}),j(H,{prop:"province",label:"所在省份"}),j(H,{prop:"city",label:"所在城市"}),j(H,{prop:"address",label:"地址"}),j(H,{prop:"phone",label:"联系电话"}),j(H,{prop:"url",label:"URL地址"})])),_:1},8,["data"]),j(L,{background:"",onCurrentChange:f,onSizeChange:f,total:P(l).response.total||0,"current-page":P(l).response.page,"onUpdate:currentPage":b[2]||(b[2]=e=>P(l).response.page=e),"page-size":P(l).response.size,"onUpdate:pageSize":b[3]||(b[3]=e=>P(l).response.size=e),"hide-on-single-page":!1,"page-sizes":[10,15,20,25,30,35,40],layout:"total, sizes, prev, pager, next, jumper"},null,8,["total","current-page","page-size"]),j(ge,{ref_key:"userEditorRef",ref:o},null,512)])),_:1},8,["locale"])}}});export{be as default};
