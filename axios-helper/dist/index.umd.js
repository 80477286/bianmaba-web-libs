(function(n,i){typeof exports=="object"&&typeof module<"u"?i(exports,require("axios"),require("vue")):typeof define=="function"&&define.amd?define(["exports","axios","vue"],i):(n=typeof globalThis<"u"?globalThis:n||self,i(n.index={},n.Axios,n.Vue))})(this,function(n,i,u){"use strict";var te=Object.defineProperty;var se=(n,i,u)=>i in n?te(n,i,{enumerable:!0,configurable:!0,writable:!0,value:u}):n[i]=u;var c=(n,i,u)=>(se(n,typeof i!="symbol"?i+"":i,u),u);const R=Object.prototype.toString,F=(e=>t=>{let s=R.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),p=e=>(e=e.toLowerCase(),function(t){return F(t)===e}),M=(e,t)=>function(){return e.apply(t,arguments)},y=e=>Array.isArray(e),d=e=>typeof e>"u",T=e=>e!==null&&!d(e)&&e.constructor!==null&&!d(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e),w=p("ArrayBuffer"),B=e=>{let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&w(e.buffer),t},L=e=>typeof e=="string",q=e=>typeof e=="number"&&isFinite(e),j=e=>e!=null&&typeof e=="object"&&Array.isArray(e)===!1,f=e=>{if(F(e)!=="object")return!1;let t=Object.getPrototypeOf(e);return t===null||t===Object.prototype},D=p("Date"),I=p("File"),U=p("Blob"),v=p("FileList"),b=e=>R.call(e)==="[object Function]",N=e=>j(e)&&b(e.pipe),G=e=>{let t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||R.call(e)===t||b(e.toString)&&e.toString()===t)},H=p("URLSearchParams"),C=e=>e.trim?e.trim():e.replace(/^\s+|\s+$/g,""),_=()=>typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u",O=(e,t)=>{if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),y(e))for(let s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else for(let s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)},V=(e,t,s)=>(O(t,function(r,a){s&&typeof r=="function"?e[a]=M(r,s):e[a]=r}),e),K=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),W=(e,t,s,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,s&&Object.assign(e.prototype,s)},z=(e,t,s)=>{let r,a,o,h={};t=t||{};do{for(r=Object.getOwnPropertyNames(e),a=r.length;a-- >0;)o=r[a],h[o]||(t[o]=e[o],h[o]=!0);e=Object.getPrototypeOf(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},X=(e,t,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=t.length;let r=e.indexOf(t,s);return r!==-1&&r===s},$=e=>{if(!e)return null;let t=e.length;if(d(t))return null;let s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},k=function(e){return function(t){return e&&t instanceof e}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),J=(e=1e3)=>new Promise(t=>{setTimeout(t,e)}),A=function(...e){let t=arguments[0],s=(r,a)=>{f(t[a])&&f(r)?t[a]=A(t[a],r):f(r)?t[a]=A({},r):y(r)?t[a]=r.slice():t[a]=r};for(let r=0,a=arguments.length;r<a;r++)O(arguments[r],s);return t},ee={merge:A,delay:J,isTypedArray:k,toArray:$,endsWith:X,toFlatObject:z,inherits:W,stripBOM:K,extend:V,forEach:O,isStandardBrowserEnv:_,trim:C,isURLSearchParams:H,isFormData:G,isStream:N,isFunction:b,isFileList:v,isBlob:U,isFile:I,isDate:D,isPlainObject:f,isObject:j,isNumber:q,isString:L,isArrayBufferView:B,isArrayBuffer:w,isBuffer:T,isUndefined:d,isArray:y},l=Object.freeze(Object.defineProperty({__proto__:null,default:ee,delay:J,endsWith:X,extend:V,forEach:O,inherits:W,isArray:y,isArrayBuffer:w,isArrayBufferView:B,isBlob:U,isBuffer:T,isDate:D,isFile:I,isFileList:v,isFormData:G,isFunction:b,isNumber:q,isObject:j,isPlainObject:f,isStandardBrowserEnv:_,isStream:N,isString:L,isTypedArray:k,isURLSearchParams:H,isUndefined:d,merge:A,stripBOM:K,toArray:$,toFlatObject:z,trim:C},Symbol.toStringTag,{value:"Module"}));var m=(e=>(e["application/atom+xml"]="application/atom+xml",e["application/json"]="application/json",e["application/x-www-form-urlencoded"]="application/x-www-form-urlencoded",e["application/xml"]="application/xml",e["multipart/form-data"]="multipart/form-data",e["text/html"]="text/html",e["text/plain"]="text/plain",e))(m||{}),g=(e=>(e.POST="POST",e.GET="GET",e.DELETE="DELETE",e.HEAD="HEAD",e.OPTIONS="OPTIONS",e.PUT="PUT",e.PATCH="PATCH",e.PURGE="PURGE",e.LINK="LINK",e.UNLINK="UNLINK",e))(g||{});const P={method:g.POST,headers:{"Content-Type":m["application/json"]},xRequestedWith:"XMLHttpRequest"};class Q{constructor(t=P){c(this,"globalOptions",P);this.globalOptions=l.merge(this.globalOptions||{},t),console.debug("初始化全局配置..."),i.defaults.baseURL=this.globalOptions.baseUrl,i.defaults.method=this.globalOptions.method,i.defaults.headers.common["X-Requested-With"]=this.globalOptions.xRequestedWith,i.interceptors.request.use(this.globalOptions.requestSuccessHandler||this.defaultRequestSuccessHandler,this.globalOptions.requestFailHandler||this.defaultRequestFailHandler),i.interceptors.response.use(this.globalOptions.responseSuccessHandler||this.defaultResponseSuccessHandler,this.globalOptions.responseFailHandler||this.defaultResponseFailHandler),console.debug("全局配置初始化完成。")}defaultRequestSuccessHandler(t){return t}defaultRequestFailHandler(t){return console.error("远程请求出现错误!"),Promise.reject(t)}defaultResponseSuccessHandler(t){return t}defaultResponseFailHandler(t){var s,r;return console.log(((r=(s=t.response)==null?void 0:s.data)==null?void 0:r.result)||"远程请求出现错误(code="+t.response.status+")"),Promise.reject(t)}createAxiosInstance(t){let s=i.create(t);return s.interceptors.request.use(this.globalOptions.requestSuccessHandler,this.globalOptions.requestFailHandler),s.interceptors.response.use(this.globalOptions.responseSuccessHandler,this.globalOptions.responseFailHandler),s}}class x{constructor(t,s){c(this,"instance");c(this,"url","");c(this,"loading",!1);c(this,"response",{success:!1});c(this,"data",{});c(this,"params",{});this.instance=t,this.url=s||""}execute(t={}){return this.loading=!0,this.data=l.merge(this.data||{},t.data||{}),this.params=l.merge(this.params||{},t.params||{}),t.url=t.url?t.url:this.url,new Promise((s,r)=>{this.instance.request(t).then(a=>{this.handleThenResponse(s,a)}).catch(a=>{this.handleCatchResponse(r,a)}).finally(()=>{this.loading=!1})})}setDefaultResponse(t={}){return this.response=l.merge(this.response,t),this}setDefaultRequestData(t={}){return this.data=l.merge(this.data,t),this}setDefaultResultParams(t={}){return this.params=l.merge(this.params,t),this}handleThenResponse(t,s){this.response=s.data,t(s.data)}handleCatchResponse(t,s){if(console.error("远程请求发生异常：",s),s.response)this.response=s.response.data,t(s.response.data);else{let r={success:!1,result:"远程请求发生异常！",data:null};this.response=r,t(r)}}}class Y extends x{constructor(t,s){super(t,s)}execute(t={},s={}){return this.loading=!0,this.params=l.merge(this.params||{},s.params||{},t||{}),s.params=this.params,new Promise((r,a)=>{this.instance.get(s.url||this.url,s).then(o=>{this.handleThenResponse(r,o)}).catch(o=>{this.handleCatchResponse(a,o)}).finally(()=>{this.loading=!1})})}}class Z extends x{constructor(t,s){super(t,s)}execute(t={},s={},r={}){return this.loading=!0,this.data=l.merge(this.data||{},r.data||{},t||{}),this.params=l.merge(this.params||{},r.params||{},s||{}),this.setDefaultResponse({total:0,page:1,size:10}),r.params=this.params,new Promise((a,o)=>{this.instance.post(r.url||this.url,this.data,r).then(h=>{this.handleThenResponse(a,h)}).catch(h=>{this.handleCatchResponse(o,h)}).finally(()=>{this.loading=!1})})}}const E=class extends Q{constructor(t=P){super(t)}createRequestExecutor(t="",s={}){let r=this.createAxiosInstance(s);return u.reactive(new x(r,t))}createGetExecutor(t="",s={}){let r=l.merge({method:g.GET,data:null,params:null,headers:{"Content-Type":m["application/x-www-form-urlencoded"]}},s),a=this.createAxiosInstance(r);return u.reactive(new Y(a,t))}createPostExecutor(t="",s={}){let r=l.merge({method:g.POST,data:null,params:null,headers:{"Content-Type":m["multipart/form-data"]}},s),a=this.createAxiosInstance(r);return u.reactive(new Z(a,t))}static getInstance(){return this.getInstance()}static getInstance(t){return this.instance?t&&console.error("实例已经存在，重获取实例时，配置选项将不会生效！"):this.instance=new E(l.merge(P,t||{})),this.instance}};let S=E;c(S,"instance"),n.AbstractAxiosHelper=Q,n.AxiosHelper=S,n.Executor=x,n.GetExecutor=Y,n.HttpContentType=m,n.HttpMethod=g,n.PostExecutor=Z,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});
